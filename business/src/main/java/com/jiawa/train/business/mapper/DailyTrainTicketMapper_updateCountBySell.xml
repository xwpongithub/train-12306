<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jiawa.train.business.mapper.DailyTrainTicketMapper" >


    <update id="updateCountBySell">
        update public.daily_train_ticket
        <set>
                <if test='seatType eq "1"'>
                    ydz = ydz - 1
                </if>
                <if test='seatType eq "2"'>
                    edz = edz - 1
                </if>
                <if test='seatType eq "3"'>
                    rw = rw - 1
                </if>
                <if test='seatType eq "4"'>
                    yw = yw - 1
                </if>
        </set>
        <where>
            and date = #{date}
            and train_code = #{trainCode}
            and start_index >= #{minStartIndex}
            and start_index <![CDATA[<=]]> #{maxStartIndex}
            and end_index >= #{minEndIndex}
            and end_index <![CDATA[<=]]> #{maxEndIndex}
        </where>
    </update>

</mapper>
